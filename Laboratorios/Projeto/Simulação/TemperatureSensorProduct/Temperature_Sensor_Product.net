* D:\Usuário\Documents\GitHub\EEL7303\Laboratorios\Projeto\Simulação\TemperatureSensorProduct\Temperature_Sensor_Product.asc
R§INT_R N006 VSW 59k
A§FF0 BIT0 0 COUNT_IN 0 0 BIT0 N022 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A4 BIT0 BIT1 BIT2 BIT3 BIT4 0 AND_AUX_1 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
C§INT_C INT_OUT N006 10µ
V§LI_ION_BATTERY VCC 0 3.7V
A§FF1 BIT1 0 N022 0 0 BIT1 N023 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF2 BIT2 0 N023 0 0 BIT2 N024 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF3 BIT3 0 N024 0 0 BIT3 N025 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
V§CLK CLK 0 PULSE(0 1.2 1m 25u 25u 0.5m 1m)
A§FF4 BIT4 0 N025 0 0 BIT4 N026 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF5 BIT5 0 N026 0 0 BIT5 N027 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF6 BIT6 0 N027 0 0 BIT6 N028 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF7 BIT7 0 N028 0 0 BIT7 N029 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A1 0 D_COMP_OUT 0 CLK 0 0 COUNT_IN 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
A2 BIT5 BIT6 BIT7 BIT8 BIT9 0 AND_AUX_2 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
A3 0 AND_AUX_1 0 AND_AUX_2 0 0 CTRL_IN 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
A§FF20 N014 0 CLK N012 0 CTRL_PTAT N012 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
V§START START 0 PULSE(0 1.2 30m 0 0 10 10)
A6 0 CTRL_IN 0 START 0 0 N014 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
A5 0 D_COMP_OUT 0 N012 0 CTRL_REF_N CTRL_REF 0 AND Vhigh=1.2 Trise=1u Tfall=1u Vt=0.01
A§FF8 BIT8 0 N029 0 0 BIT8 N030 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF9 BIT9 0 N030 0 0 BIT9 0 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
Q1 CTAT CTAT 0 0 BC547C
R1 VREF CTAT 5.8k
R2 VREF PTAT+ 58k
R3 PTAT+ PTAT- 6.1k
Q2 PTAT- PTAT- 0 0 BC547C
XVSC CTAT PTAT+ VCC 0 VREF level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
SW_PTAT VSW BG_PTAT CTRL_PTAT 0 IDEAL_SW
SW_REF VSW BG_REF CTRL_REF 0 IDEAL_SW
RI_6 BG_PTAT N004 10k
RI_4 N004 N001 10k
RI_5 N009 N008 10k
RI_7 N009 N013 10k
RI_3 N003 N007 100k
RI_12 BG_REF N017 11K
RI_10 N017 N015 9.1k
RI_11 N020 N019 9.1k
RI_13 N020 N021 11k
RI_8 N015 N016 20k
R28 N016 N018 100k
RI_9 N019 N018 20k
RI_1 N001 N003 2k
RI_2 N008 N007 2k
R_AGND_2 VCC N013 47k
R_AGND_1 N013 0 47k
XAI_3 N009 N004 VCC 0 BG_PTAT LT1677
XAI_2 PTAT- N007 VCC 0 N008 LT1677
XAI_1 PTAT+ N003 VCC 0 N001 LT1677
XAI_6 N020 N017 VCC 0 BG_REF LT1677
XAI_5 VREF N018 VCC 0 N019 LT1677
XAI_4 0 N016 VCC 0 N015 LT1677
V§START_SOURCE N005 0 PULSE(0 1 0 0.1m 0.1m 1m 1m 1)
D§START_UP N005 CTAT 1N4148
XINT AGND N006 VCC 0 INT_OUT LT1677
XCOMP N011 AGND VCC 0 N010 LT1677
R_AGND_3 VCC N021 47k
R_AGND_4 N021 0 47k
RD_1 A_COMP_OUT N010 33k
RD_2 0 A_COMP_OUT 15k
XBUFFER N002 AGND VCC 0 AGND LT1677
R_AGND_X VCC N002 47k
R_AGND_Y N002 0 47k
R_COMP_2 N010 N011 100k
R_COMP_1 N011 INT_OUT 500
XBUFFER_A_TO_D A_COMP_OUT D_COMP_OUT VCC 0 D_COMP_OUT LT1677
A§FF10 BIT0 0 CLK REG_PRE REG_PRE 0 OUT0 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF11 BIT1 0 CLK REG_PRE REG_PRE 0 OUT1 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF12 BIT2 0 CLK REG_PRE REG_PRE 0 OUT2 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF13 BIT3 0 CLK REG_PRE REG_PRE 0 OUT3 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF14 BIT4 0 CLK REG_PRE REG_PRE 0 OUT4 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF15 BIT5 0 CLK REG_PRE REG_PRE 0 OUT5 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF16 BIT6 0 CLK REG_PRE REG_PRE 0 OUT6 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF17 BIT7 0 CLK REG_PRE REG_PRE 0 OUT7 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF18 BIT8 0 CLK REG_PRE REG_PRE 0 OUT8 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A§FF19 BIT9 0 CLK REG_PRE REG_PRE 0 OUT9 0 DFLOP Vhigh=1.2 Trise=1u Tfall=1u Td=5u
A7 0 CTRL_PTAT 0 CTRL_REF_N 0 REG_PRE 0 0 XOR Vhigh=1.2 Trise=1u Tfall=1u Vt=0.1 Td=50u
.model D D
.lib D:\Usuário\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib D:\Usuário\Documents\LTspiceXVII\lib\cmp\standard.bjt
* 10-BIT COUNTER
* SWITCHS/INTEGRATOR/COMPARATOR
* CONTROL UNIT
.step temp -40 80 20
* BANDGAP CIRCUIT
* BANDGAP/ADC INTERFACE
* Universidade Federal de Santa Catarina - UFSC\nEngenharia Eletrônica - EEL7303 - Circuitos Eletrônicos Analógicos\nProjeto - Sensor de Temperatura\nAndré Martins Pio de Mattos - 16103374\nGustavo Simas da Silva - 16101076
.tran 0 2.2 1m
.op
.nodeset V(INT_OUT)=0 V(VREF)=0 V(BG_REF)=0 V(VSW)=0 V(COMP_OUT)=0
.nodeset V(CTAT)=0.05
.model IDEAL_SW SW(Ron=1m Roff=100Meg Vt=0.5 Vh=0)
* Observations:\nAnalog Supply: Battery@3.7V\nDigital Supply: DVcc@1.2V\nBattery: Li-ion, nominal supply 3.7V, but it range from 3.3V to 4.2V\nAnalog Virtual Reference: Vcc/2\nRail-to-Rail: 0.3V under the Vcc supply\nTemperature range: -40 to +80\nADC_Resolution=10bits -> T2=1024 (levels)\nIdeal Precision: ~0.05ºC\nReal Precision: ~0.5ºC
* SOURCES
* Notes:\n@Nominal Supply: (Vcc=3.7V)\nIdeal values:\nT=-40°C -> T1=588; Vadc=694.02375mV ;Vreal=693.6886mV;Vref_bandgap=1.20864V;Er=0,0483%=>0,01932°C\nT=0°C -> T1=640; Vadc=750,035612mV ;Vreal=749.9158mV;Vref_bandgap=1.2005698V;Er=0,0159%=>0.015972°C\nT=40°C -> T1=694; Vadc=806.694891mV ;Vreal=806.6941mV;Vref_bandgap=1.1902818V;Er=9.805e-5 =>3.92217e-5°C\nT=80°C  -> T1=751; Vadc=863.479044mV ;Vreal=863,9253mV;Vref_bandgap=1.1773669V;Er=0,05168%=>0,041345°C\nReal values:\nErro max = 0,43% -> 0,2ºC (0->+40)\nErro max = 0,76% -> 0,3ºC (-40->+40)\nErro max = 1,24544%-> 0,5ºC (Máxima excursão)
* Simulation:
* 10-BIT REGISTER
.four 1k V(INT_OUT)
.lib LTC.lib
.lib UniversalOpamps2.sub
.backanno
.end
