* D:\Usuário\Documents\GitHub\EEL7303\Laboratorios\Projeto\Simulação\TemperatureSensorPrototypeV2\Temperature_Sensor_Prototype2.asc
R§INT_R START_UP_1 VSW 100k
A§FF0 BIT0 0 COUNT_IN 0 0 BIT0 N023 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A4 BIT0 BIT1 BIT2 BIT3 BIT4 0 AND_AUX_1 0 AND Vhigh=1 Trise=5n Tfall=5n Vt=0.01
A§COMP INT_OUT 0 0 0 0 0 COMP_OUT 0 SCHMITT Trise=5n Tfall=5n Vt=0.01
C§INT_C INT_OUT START_UP_1 1µ
SW_REF VSW BG_REF CTRL_REF 0 IDEAL_SW
SW_IN VSW BG_PTAT CTRL_PTAT 0 IDEAL_SW
V§INT_+VCC +VCC 0 5V
V§INT_-VCC -VCC 0 -5V
XINT 0 START_UP_1 +VCC -VCC INT_OUT level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
A§FF1 BIT1 0 N023 0 0 BIT1 N024 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF2 BIT2 0 N024 0 0 BIT2 N025 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF3 BIT3 0 N025 0 0 BIT3 N026 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
V§CLK CLK 0 PULSE(0 1 1m 1u 1u 0.5m 1m)
A§FF4 BIT4 0 N026 0 0 BIT4 N027 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF5 BIT5 0 N027 0 0 BIT5 N028 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF6 BIT6 0 N028 0 0 BIT6 N029 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF7 BIT7 0 N029 0 0 BIT7 N030 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A1 0 COMP_OUT 0 CLK 0 0 COUNT_IN 0 AND Vhigh=1 Trise=5n Tfall=5n
A2 BIT5 BIT6 BIT7 BIT8 BIT9 0 AND_AUX_2 0 AND Vhigh=1 Trise=5n Tfall=5n Vt=0.01
A3 0 AND_AUX_1 0 AND_AUX_2 0 0 CTRL_IN 0 AND Vhigh=1 Trise=5n Tfall=5n Vt=0.01
A§FF8 N005 0 CLK N004 0 CTRL_PTAT N004 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
SW_START_UP INT_OUT START_UP_1 CTRL_START 0 IDEAL_SW
V§START_UP_LOCK N007 0 PULSE(0 1 30m 0 0 10 10)
A8 0 CTRL_IN 0 N007 0 0 N005 0 AND Vhigh=1 Trise=5n Tfall=5n Vt=0.01
V§SW_CTRL CTRL_START 0 PULSE(0 1 0 1u 1u 1m 10m 1)
A5 0 COMP_OUT 0 N004 0 0 CTRL_REF 0 AND Vhigh=1 Trise=5n Tfall=5n
A§FF10 BIT8 0 N030 0 0 BIT8 N031 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
A§FF11 BIT9 0 N031 0 0 BIT9 0 0 DFLOP Vhigh=1 Trise=10n Tfall=10n Td=5n
Q1 CTAT CTAT 0 0 BC547C
R1 VREF CTAT 6.1k
R2 VREF PTAT+ 61k
R3 PTAT+ PTAT- 6.1k
D§START_UP_DIODE N013 CTAT 1N4148
Q2 PTAT- PTAT- 0 0 BC547C
XINT1 CTAT PTAT+ +VCC -VCC VREF level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
R4 N013 N022 1Meg
V§START_UP N022 0 3V
R5 BG_PTAT N008 2k
R7 N008 N015 1k
R6 N009 N016 1k
R8 N009 0 2k
R11 N014 N015 1k
R12 N015 N016 2k
R13 N016 N017 1k
R14 BG_REF N010 2k
R15 N010 N019 5k
R16 N011 N020 5k
R17 N011 0 2k
R18 N018 N019 1k
R19 N019 N020 10k
R20 N020 N021 1k
XINT3 PTAT+ N015 +VCC -VCC N014 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XINT6 0 N019 +VCC -VCC N018 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XINT4 VREF N020 +VCC -VCC N021 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XINT5 PTAT- N016 +VCC -VCC N017 level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XINT2 N009 N008 +VCC -VCC BG_PTAT level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
XINT7 N011 N010 +VCC -VCC BG_REF level.2 Avol=1Meg GBW=10Meg Slew=10Meg ilimit=25m rail=0 Vos=0 phimargin=45 en=0 enk=0 in=0 ink=0 Rin=500Meg
.model D D
.lib D:\Usuário\Documents\LTspiceXVII\lib\cmp\standard.dio
.model NPN NPN
.model PNP PNP
.lib D:\Usuário\Documents\LTspiceXVII\lib\cmp\standard.bjt
.model IDEAL_SW SW(Ron=1m Roff=100Meg Vt=0.5 Vh=0)
* 10-BIT COUNTER
* SWITCHS/INTEGRATOR/COMPARATOR
* CONTROL UNIT
.step temp -25 100 25
* BANDGAP CIRCUIT
* BANDGAP/ADC INTERFACE
* Universidade Federal de Santa Catarina - UFSC\nEngenharia Eletrônica - EEL7303 - Circuitos Eletrônicos Analógicos\nProjeto - Sensor de Temperatura\nAndré Martins Pio de Mattos - 16103374\nGustavo Simas da Silva - 16101076
.tran 0 2 0
.op
* Observations:\nADC_Resolution=10bits -> T2=1024 (levels)\nT=-25°C -> T1=346; Vadc=149,4053071mV ;Vreal=151,05265mV;Vref_bandgap=442,17062mV;Er=1,09%=>0,2725°C\nT=75°C  -> T1=486; Vadc=209,4429672mV ;Vreal=211,54565mV;Vref_bandgap=441,29547mV;Er=0,99%=>0,7425°C
.nodeset V(INT_OUT)=0 V(VREF)=0 V(BG_REF)=0
.lib UniversalOpamps2.sub
.backanno
.end
