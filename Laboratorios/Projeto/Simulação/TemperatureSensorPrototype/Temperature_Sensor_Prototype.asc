Version 4
SHEET 1 4048 1180
WIRE -1728 -96 -4224 -96
WIRE 0 -96 -1664 -96
WIRE 1104 -96 64 -96
WIRE 304 -48 272 -48
WIRE 304 -16 272 -16
WIRE 592 0 592 -16
WIRE -832 112 -832 32
WIRE -1360 128 -1360 112
WIRE -880 128 -960 128
WIRE 240 144 208 144
WIRE 240 160 208 160
WIRE -880 176 -912 176
WIRE 240 176 208 176
WIRE 240 192 208 192
WIRE 560 192 528 192
WIRE 240 208 208 208
WIRE -1360 224 -1360 208
WIRE 560 224 528 224
WIRE -912 240 -912 176
WIRE -912 240 -944 240
WIRE -832 240 -832 192
WIRE -656 240 -832 240
WIRE -528 240 -528 176
WIRE -528 240 -576 240
WIRE -496 240 -528 240
WIRE -336 240 -336 176
WIRE -336 240 -432 240
WIRE 240 240 208 240
WIRE 240 256 208 256
WIRE -944 272 -944 240
WIRE 240 272 208 272
WIRE -832 288 -832 240
WIRE 240 288 208 288
WIRE -912 304 -912 240
WIRE -880 304 -912 304
WIRE 240 304 208 304
WIRE 640 304 528 304
WIRE -2800 336 -2800 304
WIRE -2800 336 -2896 336
WIRE -528 336 -528 240
WIRE -448 336 -528 336
WIRE -3504 352 -3504 320
WIRE -3504 352 -3600 352
WIRE -880 352 -976 352
WIRE -336 352 -336 240
WIRE -336 352 -384 352
WIRE -272 352 -336 352
WIRE -208 352 -272 352
WIRE 528 352 528 304
WIRE -1728 368 -1728 -96
WIRE -1728 368 -2464 368
WIRE -448 368 -480 368
WIRE 816 368 784 368
WIRE -2800 384 -2800 336
WIRE -208 384 -208 368
WIRE -3504 400 -3504 352
WIRE 304 400 224 400
WIRE 448 400 368 400
WIRE 640 400 640 304
WIRE 640 400 608 400
WIRE 816 400 640 400
WIRE -480 416 -480 368
WIRE -2896 432 -2896 336
WIRE -1728 432 -2400 432
WIRE 304 432 192 432
WIRE -3600 448 -3600 352
WIRE 448 448 432 448
WIRE 672 448 624 448
WIRE -1584 480 -1584 464
WIRE -1360 480 -1360 464
WIRE -1152 480 -1152 464
WIRE -832 496 -832 368
WIRE 192 496 192 432
WIRE -1968 528 -2096 528
WIRE -1840 528 -1968 528
WIRE -2896 544 -2896 512
WIRE -2816 544 -2816 448
WIRE -2816 544 -2896 544
WIRE -2784 544 -2784 448
WIRE -2768 544 -2784 544
WIRE -2656 544 -2688 544
WIRE -3600 560 -3600 528
WIRE -3520 560 -3520 464
WIRE -3520 560 -3600 560
WIRE -3488 560 -3488 464
WIRE -3472 560 -3488 560
WIRE -3360 560 -3392 560
WIRE -2896 560 -2896 544
WIRE -2784 560 -2784 544
WIRE -2096 560 -2096 528
WIRE -1840 560 -1840 528
WIRE -3600 576 -3600 560
WIRE -3488 576 -3488 560
WIRE -1968 624 -1968 528
WIRE -1664 624 -1664 -96
WIRE 0 624 0 -96
WIRE 0 624 -1664 624
WIRE 64 624 64 -96
WIRE 1104 624 1104 -96
WIRE 1104 624 64 624
WIRE 1104 688 -1664 688
WIRE -2272 720 -2336 720
WIRE -2096 720 -2096 640
WIRE -2096 720 -2208 720
WIRE -1984 720 -1984 688
WIRE -1984 720 -2096 720
WIRE -1952 720 -1952 688
WIRE -1840 720 -1840 640
WIRE -1840 720 -1952 720
WIRE -3008 752 -3072 752
WIRE -2896 752 -2896 640
WIRE -2896 752 -2928 752
WIRE -2880 752 -2896 752
WIRE -2784 752 -2784 640
WIRE -2784 752 -2800 752
WIRE -2736 752 -2784 752
WIRE -2592 752 -2656 752
WIRE -3712 768 -3776 768
WIRE -3600 768 -3600 656
WIRE -3600 768 -3632 768
WIRE -3584 768 -3600 768
WIRE -3488 768 -3488 656
WIRE -3488 768 -3504 768
WIRE -3440 768 -3488 768
WIRE -3296 768 -3360 768
WIRE -1840 768 -1840 720
WIRE -2336 784 -2336 720
WIRE -2592 816 -2592 752
WIRE -3296 832 -3296 768
WIRE -3072 832 -3072 752
WIRE -1392 832 -1520 832
WIRE -1136 832 -1392 832
WIRE -880 832 -1136 832
WIRE -624 832 -880 832
WIRE -368 832 -624 832
WIRE -112 832 -368 832
WIRE 144 832 -112 832
WIRE 400 832 144 832
WIRE 656 832 400 832
WIRE 912 832 656 832
WIRE -3776 848 -3776 768
WIRE -2096 864 -2096 720
WIRE -2000 864 -2096 864
WIRE -1840 864 -1840 848
WIRE -1840 864 -1936 864
WIRE -1280 864 -1280 800
WIRE -1280 864 -1504 864
WIRE -1024 864 -1024 800
WIRE -1024 864 -1248 864
WIRE -768 864 -768 800
WIRE -768 864 -992 864
WIRE -512 864 -512 800
WIRE -512 864 -736 864
WIRE -256 864 -256 800
WIRE -256 864 -480 864
WIRE 0 864 0 800
WIRE 0 864 -224 864
WIRE 256 864 256 800
WIRE 256 864 32 864
WIRE 512 864 512 800
WIRE 512 864 288 864
WIRE 768 864 768 800
WIRE 768 864 544 864
WIRE 1024 864 1024 800
WIRE 1024 864 800 864
WIRE -2096 896 -2096 864
WIRE -1840 896 -1840 864
WIRE -1392 896 -1392 832
WIRE -1136 896 -1136 832
WIRE -880 896 -880 832
WIRE -624 896 -624 832
WIRE -368 896 -368 832
WIRE -112 896 -112 832
WIRE 144 896 144 832
WIRE 400 896 400 832
WIRE 656 896 656 832
WIRE 912 896 912 832
WIRE -2336 912 -2336 864
WIRE -3056 928 -3056 896
WIRE -2896 928 -2896 752
WIRE -2896 928 -3056 928
WIRE -2784 928 -2784 752
WIRE -2608 928 -2608 880
WIRE -2608 928 -2784 928
WIRE -3760 944 -3760 912
WIRE -3600 944 -3600 768
WIRE -3600 944 -3760 944
WIRE -3488 944 -3488 768
WIRE -3312 944 -3312 896
WIRE -3312 944 -3488 944
WIRE -2000 944 -2000 864
WIRE -2000 944 -2032 944
WIRE -1936 944 -1936 864
WIRE -1904 944 -1936 944
WIRE -1504 944 -1504 864
WIRE -1472 944 -1504 944
WIRE -1264 944 -1312 944
WIRE -1248 944 -1248 864
WIRE -1216 944 -1248 944
WIRE -1008 944 -1056 944
WIRE -992 944 -992 864
WIRE -960 944 -992 944
WIRE -752 944 -800 944
WIRE -736 944 -736 864
WIRE -704 944 -736 944
WIRE -496 944 -544 944
WIRE -480 944 -480 864
WIRE -448 944 -480 944
WIRE -240 944 -288 944
WIRE -224 944 -224 864
WIRE -192 944 -224 944
WIRE 16 944 -32 944
WIRE 32 944 32 864
WIRE 64 944 32 944
WIRE 272 944 224 944
WIRE 288 944 288 864
WIRE 320 944 288 944
WIRE 528 944 480 944
WIRE 544 944 544 864
WIRE 576 944 544 944
WIRE 784 944 736 944
WIRE 800 944 800 864
WIRE 832 944 800 944
WIRE -1472 992 -1520 992
WIRE -1280 992 -1280 864
WIRE -1280 992 -1296 992
WIRE -1264 992 -1264 944
WIRE -1216 992 -1264 992
WIRE -1024 992 -1024 864
WIRE -1024 992 -1040 992
WIRE -1008 992 -1008 944
WIRE -960 992 -1008 992
WIRE -768 992 -768 864
WIRE -768 992 -784 992
WIRE -752 992 -752 944
WIRE -704 992 -752 992
WIRE -512 992 -512 864
WIRE -512 992 -528 992
WIRE -496 992 -496 944
WIRE -448 992 -496 992
WIRE -256 992 -256 864
WIRE -256 992 -272 992
WIRE -240 992 -240 944
WIRE -192 992 -240 992
WIRE 0 992 0 864
WIRE 0 992 -16 992
WIRE 16 992 16 944
WIRE 64 992 16 992
WIRE 256 992 256 864
WIRE 256 992 240 992
WIRE 272 992 272 944
WIRE 320 992 272 992
WIRE 512 992 512 864
WIRE 512 992 496 992
WIRE 528 992 528 944
WIRE 576 992 528 992
WIRE 768 992 768 864
WIRE 768 992 752 992
WIRE 784 992 784 944
WIRE 832 992 784 992
WIRE 1024 992 1024 864
WIRE 1024 992 1008 992
WIRE -2096 1024 -2096 992
WIRE -1840 1024 -1840 992
WIRE -3088 1040 -3088 896
WIRE -2576 1040 -2576 880
WIRE -3792 1056 -3792 912
WIRE -3280 1056 -3280 896
WIRE -1392 1072 -1392 1040
WIRE -1392 1072 -1520 1072
WIRE -1136 1072 -1136 1040
WIRE -1136 1072 -1392 1072
WIRE -880 1072 -880 1040
WIRE -880 1072 -1136 1072
WIRE -624 1072 -624 1040
WIRE -624 1072 -880 1072
WIRE -368 1072 -368 1040
WIRE -368 1072 -624 1072
WIRE -112 1072 -112 1040
WIRE -112 1072 -368 1072
WIRE 144 1072 144 1040
WIRE 144 1072 -112 1072
WIRE 400 1072 400 1040
WIRE 400 1072 144 1072
WIRE 656 1072 656 1040
WIRE 656 1072 400 1072
WIRE 912 1072 912 1040
WIRE 912 1072 656 1072
WIRE -4224 1152 -4224 -96
WIRE -2464 1152 -2464 368
WIRE -2464 1152 -4224 1152
WIRE -2400 1152 -2400 432
WIRE -1728 1152 -1728 432
WIRE -1728 1152 -2400 1152
WIRE -1664 1152 -1664 688
WIRE 1104 1152 1104 688
WIRE 1104 1152 -1664 1152
FLAG -480 416 0
FLAG -416 320 +VCC
FLAG -416 384 -VCC
FLAG -208 384 0
FLAG -944 272 0
FLAG -1584 560 0
FLAG -1584 464 +VCC
FLAG -1360 560 0
FLAG -1360 464 -VCC
FLAG -272 352 INT_OUT
FLAG -144 352 COMP_OUT
FLAG -832 240 VSW
FLAG 592 80 0
FLAG 592 -16 CLK
FLAG -1520 1072 0
FLAG -1280 800 BIT0
FLAG -1024 800 BIT1
FLAG -768 800 BIT2
FLAG -512 800 BIT3
FLAG -1520 832 0
FLAG 208 144 BIT0
FLAG 208 160 BIT1
FLAG 208 176 BIT2
FLAG 208 192 BIT3
FLAG 304 160 AND_AUX_1
FLAG -256 800 BIT4
FLAG 0 800 BIT5
FLAG 256 800 BIT6
FLAG 512 800 BIT7
FLAG 272 -48 COMP_OUT
FLAG 272 -16 CLK
FLAG 368 -48 COUNT_IN
FLAG 208 240 BIT5
FLAG 208 256 BIT6
FLAG 208 272 BIT7
FLAG 208 288 BIT8
FLAG 304 256 AND_AUX_2
FLAG 528 192 AND_AUX_1
FLAG 528 224 AND_AUX_2
FLAG 624 192 CTRL_IN
FLAG 528 496 0
FLAG 672 448 CTRL_PTAT
FLAG 432 448 CLK
FLAG -976 352 CTRL_REF
FLAG -1408 192 0
FLAG -1360 112 START_UP_1
FLAG 192 576 0
FLAG 224 400 CTRL_IN
FLAG -1152 560 0
FLAG -1152 464 CTRL_START
FLAG -1360 224 START_UP_2
FLAG -336 176 START_UP_2
FLAG -528 176 START_UP_1
FLAG -1520 992 COUNT_IN
FLAG -960 128 CTRL_PTAT
FLAG 784 368 COMP_OUT
FLAG 880 368 CTRL_REF
FLAG 208 208 BIT4
FLAG 768 800 BIT8
FLAG 1024 800 BIT9
FLAG 208 304 BIT9
FLAG -1408 144 CTRL_START
FLAG -2096 1024 0
FLAG -1840 1024 0
FLAG -1936 656 +VCC
FLAG -2000 656 -VCC
FLAG -1968 528 VREF
FLAG -1840 720 PTAT+
FLAG -1840 864 PTAT-
FLAG -2336 992 0
FLAG -2096 864 CTAT
FLAG -2832 416 +VCC
FLAG -2768 416 -VCC
FLAG -2656 544 0
FLAG -2800 304 BG_PTAT
FLAG -3088 1040 PTAT+
FLAG -2576 1040 PTAT-
FLAG -832 32 BG_PTAT
FLAG -832 496 BG_REF
FLAG -3280 1056 VREF
FLAG -3504 320 BG_REF
FLAG -2560 848 -VCC
FLAG -3104 864 -VCC
FLAG -3040 864 +VCC
FLAG -2624 848 +VCC
FLAG -3536 432 +VCC
FLAG -3472 432 -VCC
FLAG -3360 560 0
FLAG -3264 864 -VCC
FLAG -3808 880 -VCC
FLAG -3744 880 +VCC
FLAG -3328 864 +VCC
FLAG -3792 1056 0
SYMBOL res -560 224 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName INT_R
SYMATTR Value 100k
SYMBOL Digital\\dflop -1392 896 R0
SYMATTR InstName FF0
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\and 272 112 R0
SYMATTR InstName A4
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n Vt=0.01
SYMBOL Digital\\schmtbuf -208 288 R0
SYMATTR InstName COMP
SYMATTR Value2 Trise=5n Tfall=5n Vt=0.01
SYMBOL cap -432 224 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName INT_C
SYMATTR Value 1µ
SYMBOL sw -832 272 R0
SYMATTR InstName SW_REF
SYMATTR Value IDEAL_SW
SYMBOL sw -832 208 M180
SYMATTR InstName SW_IN
SYMATTR Value IDEAL_SW
SYMBOL voltage -1584 464 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value 5V
SYMATTR InstName INT_+VCC
SYMBOL voltage -1360 464 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value -5V
SYMATTR InstName INT_-VCC
SYMBOL Opamps\\UniversalOpamp2 -416 352 R0
SYMATTR InstName INT
SYMBOL Digital\\dflop -1136 896 R0
SYMATTR InstName FF1
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop -880 896 R0
SYMATTR InstName FF2
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop -624 896 R0
SYMATTR InstName FF3
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL voltage 592 -16 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 1 1m 1u 1u 0.5m 1m)
SYMATTR InstName CLK
SYMBOL Digital\\dflop -368 896 R0
SYMATTR InstName FF4
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop -112 896 R0
SYMATTR InstName FF5
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop 144 896 R0
SYMATTR InstName FF6
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop 400 896 R0
SYMATTR InstName FF7
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\and 336 -96 R0
SYMATTR InstName A1
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n
SYMBOL Digital\\and 272 208 R0
SYMATTR InstName A2
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n Vt=0.01
SYMBOL Digital\\and 592 144 R0
SYMATTR InstName A3
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n Vt=0.01
SYMBOL Digital\\dflop 528 352 R0
SYMATTR InstName FF8
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL sw -1360 224 M180
SYMATTR InstName SW_START_UP
SYMATTR Value IDEAL_SW
SYMBOL voltage 192 480 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 1 30m 0 0 10 10)
SYMATTR InstName START_UP_LOCK
SYMBOL Digital\\and 336 352 R0
SYMATTR InstName A8
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n Vt=0.01
SYMBOL voltage -1152 464 R0
WINDOW 3 24 44 Invisible 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value PULSE(0 1 0 1u 1u 1m 10m 1)
SYMATTR InstName SW_CTRL
SYMBOL Digital\\and 848 320 R0
SYMATTR InstName A5
SYMATTR Value2 Vhigh=1 Trise=5n Tfall=5n
SYMBOL Digital\\dflop 656 896 R0
SYMATTR InstName FF10
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL Digital\\dflop 912 896 R0
SYMATTR InstName FF11
SYMATTR Value2 Vhigh=1 Trise=10n Tfall=10n Td=5n
SYMBOL npn -2032 896 M0
SYMATTR InstName Q1
SYMATTR Value BC547C
SYMBOL res -2080 544 M0
SYMATTR InstName R1
SYMATTR Value 6.1k
SYMBOL res -1856 544 R0
SYMATTR InstName R2
SYMATTR Value 61k
SYMBOL res -1856 752 R0
SYMATTR InstName R3
SYMATTR Value 6.1k
SYMBOL diode -2272 736 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName START_UP_DIODE
SYMATTR Value 1N4148
SYMBOL npn -1904 896 R0
SYMATTR InstName Q2
SYMATTR Value BC547C
SYMBOL Opamps\\UniversalOpamp2 -1968 656 M270
SYMATTR InstName INT1
SYMBOL res -2352 768 R0
SYMATTR InstName R4
SYMATTR Value 1Meg
SYMBOL voltage -2336 896 R0
WINDOW 3 24 44 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 24 44 Left 2
SYMATTR Value 3V
SYMATTR InstName START_UP
SYMBOL res -2912 416 R0
SYMATTR InstName R5
SYMATTR Value 3k
SYMBOL res -2912 544 R0
SYMATTR InstName R7
SYMATTR Value 1k
SYMBOL res -2800 544 R0
SYMATTR InstName R6
SYMATTR Value 1k
SYMBOL res -2784 560 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R8
SYMATTR Value 3k
SYMBOL Opamps\\OP747 -2864 416 R270
SYMATTR InstName U1
SYMBOL Opamps\\OP747 -3008 864 M270
SYMATTR InstName U2
SYMBOL Opamps\\OP747 -2656 848 R270
SYMATTR InstName U3
SYMBOL res -3024 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res -2896 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res -2752 768 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res -3616 432 R0
SYMATTR InstName R14
SYMATTR Value 2k
SYMBOL res -3616 560 R0
SYMATTR InstName R15
SYMATTR Value 5k
SYMBOL res -3504 560 R0
WINDOW 0 45 56 Left 2
SYMATTR InstName R16
SYMATTR Value 5k
SYMBOL res -3488 576 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 -1 96 VBottom 2
SYMATTR InstName R17
SYMATTR Value 2k
SYMBOL Opamps\\OP747 -3568 432 R270
SYMATTR InstName U4
SYMBOL Opamps\\OP747 -3712 880 M270
SYMATTR InstName U5
SYMBOL Opamps\\OP747 -3360 864 R270
SYMATTR InstName U6
SYMBOL res -3728 784 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R18
SYMATTR Value 2k
SYMBOL res -3600 784 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R19
SYMATTR Value 1k
SYMBOL res -3456 784 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R20
SYMATTR Value 2k
TEXT -752 544 Left 2 !.model IDEAL_SW SW(Ron=1m Roff=100Meg Vt=0.5 Vh=0)
TEXT 872 1112 Left 2 ;10-BIT COUNTER
TEXT -512 584 Left 2 ;SWITCHS/INTEGRATOR/COMPARATOR
TEXT 872 584 Left 2 ;CONTROL UNIT
TEXT -1960 -144 Left 2 !.step temp -25 100 25
TEXT -2016 1112 Left 2 ;BANDGAP CIRCUIT
TEXT -2096 328 Left 2 ;BANDGAP/ADC INTERFACE
TEXT -1664 -248 Left 2 ;Universidade Federal de Santa Catarina - UFSC\nEngenharia Eletrônica - EEL7303 - Circuitos Eletrônicos Analógicos\nProjeto - Sensor de Temperatura\nAndré Martins Pio de Mattos - 16103374\nGustavo Simas da Silva - 16101076
TEXT -1848 -176 Left 2 !.tran 0 2 0
TEXT -1768 -208 Left 2 !.op
TEXT -688 -248 Left 2 ;Observations:\nADC_Resolution=10bits -> T2=1024 (levels)\nT=-25°C -> T1=346; Vadc=149,4053071mV ;Vreal=151,05265mV;Vref_bandgap=442,17062mV;Er=1,09%=>0,2725°C\nT=75°C  -> T1=486; Vadc=209,4429672mV ;Vreal=211,54565mV;Vref_bandgap=441,29547mV;Er=0,99%=>0,7425°C
